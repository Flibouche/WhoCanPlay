{% extends 'base.html.twig' %}

{% block title %}Register{% endblock %}

{% block body %}

{% include 'includes/_flash_messages.html.twig' %}

<div class="w-full sm:max-w-md rounded-lg bg-white dark:bg-neutral-800 shadow-[rgba(50,50,93,0.25)_0px_6px_12px_-2px,_rgba(0,0,0,0.3)_0px_3px_7px_-3px]">

    <div class="p-6">

        <h1 class="text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white mb-2">Create an account</h1>

        {{ form_start(registrationForm) }}

        <div class="mb-2">
            {{ form_label(registrationForm.email, 'Email <span class="text-red-500">*</span>', {'label_html': true, 'label_attr': {'class': 'font-bold text-black dark:text-white'}}) }}
            {{ form_widget(registrationForm.email, {'attr': {'class': 'w-full px-5 py-4 text-black/80 rounded-lg mt-2 bg-neutral-200 dark:bg-zinc-700 border border-gray-300 text-black dark:text-white', 'placeholder': 'Enter an email'}}) }}
            <div class="text-red-500">
                {{ form_errors(registrationForm.email) }}
            </div>
        </div>

        <div>
            {{ form_widget(registrationForm.email_confirm) }}
        </div>
        
        <div class="mb-2">
            {{ form_label(registrationForm.pseudo, 'Pseudo <span class="text-red-500">*</span>', {'label_html': true, 'label_attr': {'class': 'font-bold text-black dark:text-white'}}) }}
            {{ form_widget(registrationForm.pseudo, {'attr': {'class': 'w-full px-5 py-4 text-black/80 rounded-lg mt-2 bg-neutral-200 dark:bg-zinc-700 border border-gray-300 text-black dark:text-white', 'placeholder': 'Enter a pseudo'}}) }}
            <div class="text-red-500">
                {{ form_errors(registrationForm.pseudo) }}
            </div>
        </div>
        
        <div class="mb-2">
            <div class="flex justify-between">
                {{ form_label(registrationForm.plainPassword.first, 'Password <span class="text-red-500">*</span>', {'label_html': true, 'label_attr': {'class': 'font-bold text-black dark:text-white'}}) }}
                <svg id="show-password" class="cursor-pointer w-5 h-5 mr-2 fill-black dark:fill-white hover:fill-indigo-800 dark:hover:fill-indigo-200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                    <path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"/>
                </svg>
            </div>
            {{ form_widget(registrationForm.plainPassword.first, {'attr': {'class': 'w-full px-5 py-4 text-black/80 rounded-lg mt-2 bg-neutral-200 dark:bg-zinc-700 border border-gray-300 text-black dark:text-white', 'placeholder': 'Enter a password'}}) }}
            <div class="text-red-500">
                {{ form_errors(registrationForm.plainPassword.first) }}
            </div>
        </div>

        <div class="mb-2">
            <div class="flex justify-between">
                {{ form_label(registrationForm.plainPassword.second, 'Confirm Password <span class="text-red-500">*</span>', {'label_html': true, 'label_attr': {'class': 'font-bold text-black dark:text-white'}}) }}
                <svg id="show-confirm-password" class="cursor-pointer w-5 h-5 mr-2 fill-black dark:fill-white hover:fill-indigo-800 dark:hover:fill-indigo-200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                    <path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"/>
                </svg>
            </div>
            {{ form_widget(registrationForm.plainPassword.second, {'attr': {'class': 'w-full px-5 py-4 text-black/80 rounded-lg mt-2 bg-neutral-200 dark:bg-zinc-700 border border-gray-300 text-black dark:text-white', 'placeholder': 'Confirm your password'}}) }}
            <div class="text-red-500">
                {{ form_errors(registrationForm.plainPassword.second) }}
            </div>
        </div>
        
        <div class="my-2 flex items-center">
            {{ form_widget(registrationForm.agreeTerms, { 'attr': { 'class': 'w-4 h-4 text-indigo-800'} }) }}
            {{ form_label(registrationForm.agreeTerms, 'I accept the <a href="/terms-and-conditions" class="text-indigo-800 dark:text-indigo-200 hover:underline" target="_blank">Terms and Conditions</a>', { 'label_html': true, 'label_attr': { 'class': 'ml-2 text-sm font-medium text-gray-900 dark:text-gray-300' } }) }}
            <div class="text-red-500">
                {{ form_errors(registrationForm.agreeTerms) }}
            </div>
        </div>

        <button type="submit" class="w-full my-2 text-white dark:text-black bg-indigo-800 hover:bg-indigo-600 focus:ring-4 focus:outline-none focus:ring-indigo-800 dark:bg-indigo-200 dark:hover:bg-indigo-400 dark:focus:ring-indigo-200 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Register</button>
        {{ form_end(registrationForm) }}

        <p class="text-sm font-light text-gray-500 dark:text-gray-400">Already have an account ? <a href="{{ path('app_login') }}" class="font-medium text-indigo-800 hover:underline dark:text-indigo-200">Sign in</a></p>

    </div>

</div>

<script>
    const showPassword = document.getElementById('show-password');
    const showConfirmPassword = document.getElementById('show-confirm-password');

    showPassword.addEventListener('click', () => {
        const passwordInput = document.getElementById('registration_form_plainPassword_first');
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            setTimeout(() => {
                passwordInput.type = 'password';
            }, 7000)
        }
    });

    showConfirmPassword.addEventListener('click', () => {
        const confirmPasswordInput = document.getElementById('registration_form_plainPassword_second');
        if (confirmPasswordInput.type === 'password') {
            confirmPasswordInput.type = 'text';
            setTimeout(() => {
                confirmPasswordInput.type = 'password';
            }, 7000)
        }
    });
</script>

{% endblock %}